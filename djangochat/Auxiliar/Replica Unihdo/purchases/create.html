<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIHDO | Conicet </title>

    <link rel="apple-touch-icon" sizes="57x57" href="/static/fav.ico/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/fav.ico/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/fav.ico/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/fav.ico/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/fav.ico/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/fav.ico/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/fav.ico/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/fav.ico/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/fav.ico/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/fav.ico/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/fav.ico/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/fav.ico/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/fav.ico/favicon-16x16.png">
    <link rel="manifest" href="/static/fav.ico/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/fav.ico/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <!--STYLESHEET-->
    <!--=================================================-->

    <!--Open Sans Font -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;subset=latin" rel="stylesheet">

    <!--Bootstrap Stylesheet -->
    <!-- Latest compiled and minified CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" >

    <!--MagicCheck Stylesheet -->
    <link href="/static/css/magic-check.min.css" rel="stylesheet">


    <!--Nifty Stylesheet -->
    <link href="/static/css/nifty.min.css" rel="stylesheet">

    <!--Nifty Stylesheet -->
    <link href="/static/css/conicet.css" rel="stylesheet">
    <link href="/static/css/base.css" rel="stylesheet">
<!--
    <link href="/static/css/print.css" rel="stylesheet" media="print">
-->
    <!--Font Awesome -->
    <link href="/static/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" >
    <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> -->

    
<link href="/static/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css" rel="stylesheet">
<link href="/static/plugins/datepicker/bootstrap-datepicker.min.css" rel="stylesheet">
<link href="/static/plugins/select2/css/select2.min.css" rel="stylesheet">

</head>
<body>
    <div id="container" class=" effect mainnav-lg">
        



<!--NAVBAR-->
<!--===================================================-->
<header id="navbar" class="no-print" >
    <div id="navbar-container" class="boxed">

        <!--Brand logo & name-->
        <!--================================-->
        <div class="navbar-header">
            <a href="/" class="navbar-brand">
                <img src="/static/img/logo-conicet.png" alt="New Assets" class="brand-icon" style="padding: 10px;">
                <div class="brand-title">
                    <span class="brand-text">UNIHDO</span>
                </div>
            </a>
        </div>
        <!--================================-->
        <!--End brand logo & name-->


        <!--Navbar Dropdown-->
        <!--================================-->
        <div class="navbar-content clearfix">
            <ul class="nav navbar-top-links">

                <li class="tgl-menu-btn">
                    <a class="mainnav-toggle" href="#">
                        <i class="fa fa-bars icon-lg"></i>
                    </a>
                </li>

                <li>
                    <h3 class="text-dark">UNIHDO <small style="color:lightgrey">CONICET | MINDEF</small></h3>
                </li>
            </ul>
            <ul class="nav navbar-top-links pull-right">

                <!--User dropdown-->
                <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                <li id="dropdown-user" class="dropdown">
                    <a href="#" data-toggle="dropdown" class="dropdown-toggle text-right">
                        <span class="pull-right">
                            <i class="fa fa-user ic-user"></i>
                        </span>
                        <div class="username hidden-xs">Aníbal Germán Pistan</div>
                    </a>


                    <div class="dropdown-menu dropdown-menu-md dropdown-menu-right panel-default">

                        <!-- User dropdown menu -->
                        <ul class="head-list">
                            <li>
                                <span class="info">Buque Oceanográfico ARA Puerto Deseado</span>
                            </li>
                            
                            <li>
                                <span class="info">Operaciones</span>
                            </li>
                            
                            <li>
                                <a href="/users/change-password">
                                    <i class="fa fa-key icon-lg"></i> Cambiar contraseña
                                </a>
                            </li>
                            <li>
                                <a href="/accounts/logout/">
                                    <i class="fa fa-power-off icon-lg"></i> Cerrar Sesión
                                </a>
                            </li>
                        </ul>

                    </div>
                </li>
                <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                <!--End user dropdown-->

            </ul>
        </div>
        <!--================================-->
        <!--End Navbar Dropdown-->

    </div>
</header>
<!--===================================================-->
<!--END NAVBAR-->


<div class="boxed">

    <!--CONTENT CONTAINER-->
    <!--===================================================-->
    <div id="content-container">

        
        <!--Page Title-->
        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
        <div id="page-title">
            <h1 class="page-header text-overflow"><span class="fa fa-shopping-cart"></span>&nbsp;SA-Q20-O-None</h1>
            



            <!--Searchbox-->
            <!--
            <div class="searchbox">
                <div class="input-group custom-search-form">
                    <input type="text" class="form-control" placeholder="Search..">
                    <span class="input-group-btn">
                        <button class="text-muted" type="button"><i class="fa fa-search"></i></button>
                    </span>
                </div>
            </div>
            -->
        </div>
        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
        <!--End page title-->


        <!--Breadcrumb-->
        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
        <!--
        <ol class="breadcrumb">
            <li><a href="#">Home</a></li>
            <li><a href="#">Library</a></li>
            <li class="active">Data</li>
        </ol>
        -->
        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
        <!--End breadcrumb-->

        <!--Page content-->
        <!--===================================================-->
        <div id="page-content">
            
<div class="col-sm-12">
    <div class="panel">
        
        <div class="panel-body">
            <div class="tab-base">
            

<form  class="form-horizontal" id="main-form" method="post"  enctype="multipart/form-data"> <input type="hidden" name="csrfmiddlewaretoken" value="0SlTRDlE4AALu00ySuyrMTpWhE2pD5YNSA2r7EbsGzJXpTFOj96BwqeBE2Hber5y"> <ul class="nav nav-tabs"> <li class="tab-pane active"><a href="#general" data-toggle="tab">General</a></li>
<li class="tab-pane"><a href="#items" data-toggle="tab">Items</a></li>

</ul>
<div class="tab-content panel-body"> <div id="general" 
    class="tab-pane active" > <div id="div_id_date" class="form-group"> <label for="id_date" class="control-label col-sm-4 requiredField">
                Fecha Requerida<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <div class="input-group input-group-sm date datepicker" data-date="11/05/2023" data-date-format="dd/mm/yyyy" > <span class="input-group-addon"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" id="id_date" name="date" value="11/05/2023"  /> </div> </div> </div> <div id="div_id_section" class="form-group"> <label for="id_section" class="control-label col-sm-4 requiredField">
                Sección<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <select name="section" readonly="readonly" class="select form-control" required id="id_section"> <option value="">---------</option> <option value="2" selected>Buque Oceanográfico ARA Puerto Deseado</option> <option value="3">Buque Oceanográfico ARA Austral</option> <option value="1">UNIHDO</option>

</select> </div> </div> <div id="div_id_sector" class="form-group"> <label for="id_sector" class="control-label col-sm-4">
                Departamento
            </label> <div class="controls col-sm-5"> <select name="sector" readonly="readonly" class="select form-control" id="id_sector"> <option value="">Todos los Departamentos</option> <option value="A">Abastecimiento</option> <option value="C">Cubierta</option> <option value="M">Máquinas</option> <option value="O" selected>Operaciones</option> <option value="S">Sanidad</option> <option value="SC">Segundo Comandante</option>

</select> </div> </div> <div id="div_id_category" class="form-group"> <label for="id_category" class="control-label col-sm-4 requiredField">
                Rubro<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <select name="category" class="select form-control" id="id_category"> <option value="0" selected>Bs.Consumo</option> <option value="1">Equipamiento</option> <option value="2">Gs.Bancarios</option> <option value="3">Gs.Institucionales</option> <option value="4">Gs.Mant.Ed.</option> <option value="5">Gs.Mant.Eq.</option> <option value="6">Otros Gastos</option> <option value="7">Pasajes y Viáticos</option> <option value="8">Seguros</option> <option value="9">Serv.Básicos</option> <option value="10">Serv.3 No Pe.</option>

</select> </div> </div> <div id="div_id_reason" class="form-group"> <label for="id_reason" class="control-label col-sm-4">
                Objeto de Contratación
            </label> <div class="controls col-sm-5"> <input type="text" name="reason" maxlength="255" class="textinput textInput form-control" id="id_reason"> </div> </div> <div id="div_id_priority" class="form-group"> <label for="id_priority" class="control-label col-sm-4 requiredField">
                Prioridad<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <select name="priority" class="select form-control" id="id_priority"> <option value="n" selected>Normal</option> <option value="h">Alta</option>

</select> </div> </div> <div id="div_id_budget" class="form-group"> <label for="id_budget" class="control-label col-sm-4 requiredField">
                Especificaciones Técnicas<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <input type="file" name="budget" class="clearablefileinput" required id="id_budget"> </div> </div> <div id="div_id_detail" class="form-group"> <label for="id_detail" class="control-label col-sm-4 requiredField">
                Justificación<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <textarea name="detail" cols="40" rows="10" class="textarea form-control" required id="id_detail">
</textarea> </div> </div> </div>
<div id="items" 
    class="tab-pane" > <div id="item-table" 
     > </div>

</div>

</div>
<div  class="form-group form-action" class="form-group"> <div class="aab controls col-sm-4"></div> <div class="controls col-sm-5"> <input type="submit"
    name="save_changes"
    value="Guardar"
    
        class="btn btn-primary btn-success"
        id="submit-id-save_changes"
    
    
    />
<a class='text-danger' href='/purchases/provisioning'>Cancelar</a> </div>
</div> </form>

            </div>
        </div>
    </div>
</div>


<!--Item Modal-->
<!--===================================================-->
<div class="modal fade" id="item-modal" role="dialog" aria-labelledby="item-modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <!--Modal header-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times"></i></button>
                <h4 class="modal-title">Item</h4>
            </div>

            <!--Modal body-->
            <div class="modal-body">
                

<form  class="form-horizontal" id="main-form" method="post" > <input type="hidden" name="csrfmiddlewaretoken" value="0SlTRDlE4AALu00ySuyrMTpWhE2pD5YNSA2r7EbsGzJXpTFOj96BwqeBE2Hber5y"> <div id="div_id_name" class="form-group"> <label for="id_name" class="control-label col-sm-4 requiredField">
                Nombre<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <input type="text" name="name" maxlength="255" autocomplete="off" class="textinput textInput form-control" required id="id_name"> </div> </div> <div id="div_id_unit" class="form-group"> <label for="id_unit" class="control-label col-sm-4 requiredField">
                Unidad Medida<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <select name="unit" class="select form-control" id="id_unit"> <option value="cm3">Centimetro 3</option> <option value="g">Gramo</option> <option value="kg">Kilogramo</option> <option value="l">Litro</option> <option value="mts">Metro</option> <option value="mts2">Metro 2</option> <option value="pq">Paquete</option> <option value="sg">Servicio General</option> <option value="u" selected>Unidad</option>

</select> </div> </div> <div id="div_id_quantity" class="form-group"> <label for="id_quantity" class="control-label col-sm-4 requiredField">
                Cantidad<span class="asteriskField">*</span> </label> <div class="controls col-sm-5"> <input type="number" name="quantity" value="0.0" step="any" class="numberinput form-control" required id="id_quantity"> </div> </div> <div id="div_id_obs" class="form-group"> <label for="id_obs" class="control-label col-sm-4">
                Especificación
            </label> <div class="controls col-sm-5"> <textarea name="obs" cols="40" rows="3" class="textarea form-control" id="id_obs">
</textarea> </div> </div> <div  class="form-group form-action" class="form-group"> <div class="aab controls col-sm-4"></div> <div class="controls col-sm-5"> <input type="submit"
    name="save_changes"
    value="Guardar"
    
        class="btn btn-primary btn-success"
        id="submit-id-save_changes"
    
    
    />
<a class='btn btn-primary btn-continue'>Guardar y Continuar</a><a class='text-danger' data-dismiss='modal' href='/'>Cancelar</a> </div>
</div> </form>

            </div>

        </div>
    </div>
</div>
<!--===================================================-->
<!--End Item Modal-->


<template id="item-template">


<div class="row pad-btm">
    <div class="col-sm-12 text-right">
        <button type="button" class="btn btn-primary" data-target="#item-modal" data-toggle="modal"><span class="fa fa-plus"></span> Nuevo</button>
    </div>
</div>


<table class="table table-striped table-bordered big"
       cellspacing="0"
       width="100%">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>U. Medida</th>
            <th>Cantidad</th>
            <th width="50px">&nbsp;</th>
            
            <th width="100px">&nbsp;</th>
            
        </tr>
    </thead>
    <tbody>
        
        <tr class="no-data-found" style="display: none"><td colspan="5">No hay datos disponibles</td></tr>
    </tbody>
</table>
</template>


        </div>
        <!--===================================================-->
        <!--End page content-->

        
    </div>
    <!--===================================================-->
    <!--END CONTENT CONTAINER-->


    


<!--MAIN NAVIGATION-->
<!--===================================================-->
<nav id="mainnav-container">
    <div id="mainnav">

        <!--Menu-->
        <!--================================-->
        <div id="mainnav-menu-wrap">
            <div class="nano">
                <div class="nano-content" style="padding-top: 0">
                    <ul id="mainnav-menu" class="list-group">

                        
                        <li class="active">
                            <a href="#" aria-expanded="true">
                                <i class="fa fa-shopping-basket"></i>
                                <span class="menu-title">Compras</span>
                            </a>
                            <ul aria-expanded="true" style="">

                            <li class="menu-active">
                                <a href="/purchases/provisioning">
                                    <i class="fa fa-shopping-cart"></i>
                                    <span class="menu-title">Solicitudes</span>
                                </a>
                            </li>
                            

                            
                            </ul>
                        </li>

                        <li >
                            <a href="/stock/">
                                <i class="fa fa-cubes"></i>
                                <span class="menu-title">Stock</span>
                            </a>
                        </li>

                        <li >
                            <a href="/assets/" aria-expanded="true">
                                <i class="fa fa-diamond"></i>
                                <span class="menu-title">Capital</span>
                            </a>
                        </li>

                        <li >
                            <a href="/expenses/" >
                                <i class="fa fa-book"></i>
                                <span class="menu-title">Gastos</span>
                            </a>
                        </li>
                        
                    </ul>

                </div>
            </div>
        </div>
        <!--================================-->
        <!--End menu-->

    </div>
</nav>
<!--===================================================-->
<!--END MAIN NAVIGATION-->

</div>

<!-- FOOTER -->
<!--===================================================-->
<footer id="footer">
    <p class="pad-lft">&#0169; 2023 UNIDAD DE APOYO A INVESTIGACIONES HIDROGRAFICAS Y OCEANOGRAFICAS (UNIHDO DIGITAL). Creado por <a target="_blank" href="//south.vision">south.vision</a></p>
</footer>
<!--===================================================-->
<!-- END FOOTER -->


<!-- SCROLL PAGE BUTTON -->
<!--===================================================-->
<button class="scroll-top btn">
    <i class="pci-chevron chevron-up"></i>
</button>
<!--===================================================-->



    </div>
    <!--===================================================-->
    <!-- END OF CONTAINER -->

    <!--jQuery -->
    <script src="/static/js/jquery.min.js"></script>
    <!--BootstrapJS -->
    <script src="/static/js/bootstrap.min.js"></script>
    <!--Nifty Admin -->
    <script src="/static/js/nifty.min.js"></script>

    



<script src="/static/plugins/select2/js/select2.min.js"></script>
<script src="/static/plugins/select2/js/i18n/es.js"></script>
<script src="/static/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>
<script src="/static/plugins/datepicker/bootstrap-datepicker.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("select").select2({width: '100%'});

    $('.input-group.date').datepicker({
        format: "dd/mm/yyyy",
        autoclose:true,
        enableOnReadonly: false
    });

});
</script>


<script src="/static/js/typeahead.js"></script>
<script src="/static/js/sv.dataTables.js"></script>

    <script>
$.fn.serializeObject = function() {
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name]) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

function check_empty_data() {
    if ($('#item-table tbody tr').length == 1) {
        $('#item-table tbody tr.no-data-found').show()
    }
    else {
        $('#item-table tbody tr.no-data-found').hide()
    }
}

$(document).ready(function() {
    var UNIHDO='1',
        $product = $('#id_name') ;
        save_and_continue=false;

    $("select").select2({
        minimumResultsForSearch: -1,
        width: '100%'
    });

    $.get("/stock/autocomplete", function(data){
      $product.typeahead({
        source: data,
        fitToElement: true,
      });
    },'json');

    $product.change(function() {
      current = $product.typeahead("getActive");
      if (current && current.name === $('#id_name').val()) {
        $('#id_unit').val(current.unit).trigger('change');
      }
    });

    $('#id_section').on('select2:select', function (e) {

        if ($(this).val() === UNIHDO) {
            $('#id_sector').val('')
            $('#div_id_sector').hide('slow')
        }
        else {
            $('#div_id_sector').show('slow')
        }
    });

    $('#id_category').on('select2:select', function (e) {
        if ($(this).val() > 1) {
            $('#div_id_obs label').text("Observación")
        } else {
            $('#div_id_obs label').text("Especificación")
        }
    });


    if ($('#id_section').val() === UNIHDO ) {
            $('#div_id_sector').hide()
    }

    var _template = document.querySelector('#item-template');
    $('#item-table').append(document.importNode(_template.content, true));

    $('#item-modal').on('hidden.bs.modal', function () {
        $('#item-modal form')[0].reset();
        if (save_and_continue === true) {
            $('#item-modal').modal('show');
        }
        save_and_continue=false;
    });

    $('#item-modal').on('shown.bs.modal', function () {
        $('#id_unit').val('u').trigger('change');
        $('#id_quantity').val('1.00');
        $('#id_name').focus();
    });

    $('#item-modal .btn-continue').on('click', function () {
        save_and_continue=true;
        $('#item-modal .btn-success').trigger('click');
    });

    $('#item-modal form').submit(function () {
        var data = $(this).serializeObject(),
            technical = '&mdash;',
            btn_edit = '<a class="btn btn-icon btn-warning" data-target="#item-modal" data-toggle="modal"><span class="fa fa-pencil"></span></a>',
            btn_delete = '<a class="btn btn-icon btn-danger"><span class="fa fa-trash"></span></a>',
            markup = "<tr><td>$1</td><td data-pk='$2'>$3</td><td>$4</td><td class='text-center'>$5</td><td class='text-center'>$6</td></tr>";

        if (data.obs && data.obs.length > 0) {
            technical = '<span class="fa fa-info-circle" data-toggle="tooltip" data-placement="top" data-title="$OBS"></span>';
            technical = technical.replace('$OBS', data.obs);
        }
        markup = markup.replace('$1', data.name);
        markup = markup.replace('$2', data.unit);
        markup = markup.replace('$3', $('#id_unit').select2('data')[0].text);
        markup = markup.replace('$4', Number(data.quantity).toFixed(2));
        markup = markup.replace('$5', technical);
        markup = markup.replace('$6', btn_delete);

        $('#item-table tbody').append(markup);

        $('#item-modal').modal('hide');
        $('[data-toggle="tooltip"]').tooltip()

        check_empty_data();

        return false
    });

    $(document).on('click', 'table .btn-danger', function (ev) {
        ev.preventDefault();

        var $tr = $(this).closest('tr'),
            delete_url = $tr.data('url');
        $tr.remove();

        if (delete_url) {
            SouthVisionApp.DataTable.delete(delete_url);
        }

        check_empty_data();
    });

    $(document).on('click', 'table .btn-warning', function (ev) {

        var $tr = $(this).closest('tr');

        $('#id_name').val($('td:eq(0)', $tr).text());
        $('#id_unit').select2('val', $('td:eq(1)', $tr).data('pk'));
        $('#id_quantity').val($('td:eq(2)', $tr).text());
    });

    $('#main-form').submit(function () {
        $('#item-table tbody tr.no-data-found').remove();
        $('#item-table tbody tr').each(function (idx, val) {
            var $tr = $(this),
                pk = $tr.data('pk'),
                $info = $('td:eq(3) .fa-info-circle', $tr),
                values = [
                    pk ? pk : 0,
                    $('td:eq(0)', $tr).text(),
                    $('td:eq(1)', $tr).data('pk'),
                    $('td:eq(2)', $tr).text(),
                    $info.length > 0 ? $info.data('title') : '',
            ];

            $('<input>').attr({
              type: 'hidden',
              name: 'item_' + idx,
            }).val(values.join('||')).appendTo($('#main-form'));
        });

        return true;
    });

    check_empty_data();

    $('#item-modal .form-action .controls.col-sm-5').removeClass('col-sm-5').addClass('col-sm-8')
});
</script>


    <script>
    var UNIDHO=1, ALL_SECTORS='';

    $(document).ready(function() {

    //Activate the Bootstrap Tooltips & Popovers
    $('[data-toggle="tooltip"]').tooltip()

    
    })
    </script>
    </body>
</html>
